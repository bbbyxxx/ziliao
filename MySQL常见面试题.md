#  MySQL常见面试题

##  事务四大特性

- 原子性：事务要么全部执行，要么全部不执行，是不可分割的工作单位。
- 一致性：指事务开始之前和结束以后，完整性约束没有被破坏。
- 隔离性：多个事务并发访问时，事务之间是隔离的，一个事务不应该影响其它事务运行效果。
- 持久性：意味着事务在完成之后，该事务对数据库所作的更改便持久的保存在数据库中，并不会被回滚。

##  事务的并发、隔离级别

###  并发

理论上来说，事务应该彼此完全隔离，以避免并发事务所导致的问题，然而会对性能产生极大的影响，因为事务必须按顺序运行，**在实际开发中，为了提升性能，事务会以较低的隔离级别运行，事务的隔离级别可以通过隔离事务属性指定。**

###  事务的并发问题

1. 脏读：事务A读取了事务B更新的数据，然后B回滚操作，那么A读取到的数据是脏数据。
2. 不可重复读：事务A多次读取同一数据，事务B在事务A多次读取的过程中，对数据作了更新并提交，导致事务A多次读取同一数据时，出现的结果不一致。
3. 幻读：解决了不重复读，保证了同一个事务里，查询的结果都是事务开始时的状态。比如说，当A事务将表中c字段的值都改为3，而B事务新增一条数据，c字段为2，那么此时再查看数据会发现有一条并没有修改，这就是幻读。

### 事务隔离级别

1. 读未提交：即能够读取到没有被提交的数据。

2. 读已提交：能够读到已提交的数据。

3. 重复读取：即在数据读出来之后加锁，防止别人修改。

4. 串行化：最高的事务隔离级别，不管多少事务，挨个运行完一个事务的所有子事务之后才可以执行另外一个事务里面的所有子事务。

5. | 事务隔离级别 | 脏读 | 不可重复读 | 幻读 |
   | :----------: | :--: | :--------: | :--: |
   |   读未提交   |  Y   |     Y      |  Y   |
   |   读已提交   |  N   |     Y      |  Y   |
   |   可重复读   |  N   |     N      |  Y   |
   |    串行化    |  Y   |     Y      |  Y   |

##  MySQL常见的存储引擎及应用场景

###  MyISAM

- 默认存储引擎，不支持事务、外键，速度快，用于无事务要求或者select、insert为主的场景
- 会创建3个文件 .frm(表定义)、.MYD(MYData，存储数据)，.MYI(MYIndex，存储索引)
- 支持三种存储格式：静态表、动态表、压缩表
  1. 静态表：默认格式，占空间大，记录长度不够时会用空格填充，主要为固定长度类型。
  2. 动态表：包含变长字段(varchar,text,blob)，占空间少，但是频繁更新和删除会产生碎片，需要定期整理。
  3. 压缩表由MyISAMPack工具创建，空间小。

###  InnoDB

- 提供了具有提交、回滚、崩溃恢复能力的事务安全，但是会占用更多空间以保存数据和索引
- 支持外键，创建外键的时候，要求父表必须有对应的索引，字表在创建索引的时候也会自动创建索引
- 存储表和索引有两种方式：
  1. 使用共享表空间，表结构保存在.frm文件中，数据和所以呢在innodb_data_home_dir和innodb_data_file_path定义的表空间中，可以是多个文件。
  2. 使用多表空间定义，表结构保存在.frm文件中，每个表的数据和索引保存在.ibd中。

##  查询语句不同元素（where、join、limit、group by、having等）执行先后顺序

##  什么是临时表？什么时候删除？

##  B+Tree索引和Hash索引的区别

##  SQL查询语句如何确定创建哪种类型的索引？如何优化查询？

##  聚集索引和非聚集索引的区别

##  有哪些锁？select时怎么加排它锁？

##  非关系型数据库和关系型数据库的区别

##  数据库三范式

##  数据库的读写分离、主从复制。主从复制分析的7个问题

##  使用explain优化sql和索引

##  MySQL慢查询怎么解决

##  什么是内连接、外连接、交叉连接、笛卡尔积

##  MySQL都有什么锁，死锁判定原理和具体场景，死锁怎么解决

##  varchar和char的使用场景

##  MySQL高并发环境解决方法

##  数据库崩溃时事务的恢复机制