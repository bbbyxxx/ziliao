#  Zookeeper

##  CAP理论

###  Consistency：一致性

一致性是指数据在多个副本之间是否能够保持一致的特性，当系统在数据一致的状态下执行更新操作后，应该保证系统的数据仍然处于一致的状态。

如果能够做到针对一个数据项的更新操作执行完成后，所有的用户都可以读取到其最新的值，那么这样的系统就被认为具有强一致性。

###  Availablility：可用性

可用性是指系统提供的服务必须一直处于可用的状态，对于用户的每一个操作请求总是能够在有限的时间内返回结果。

”有限的时间内“是指，对于用户的一个操作请求，系统必须能够在指定的时间内返回对应的处理结果，如果超过了这个时间范围，那么系统就被认为是不可用的。

”返回结果“要求系统在完成对用户请求的处理后，返回一个正常的响应结果。正常的响应结果通常能过明确地反映出对请求的处理结果，即成功或失败，而不是一个让用户感到困惑的返回结果。

###  Partition tolerance：分区容错性

分区容错性约束了一个分布式系统需要具有如下特性：分布式系统在遇到任何网络分区故障的时候，仍然需要能够保证对外提供满足一致性和可用性的服务，除非是整个网络环境都发生了故障。

网络分区是指在分布式系统中，不同的节点分布在不同的子网络中，由于一些特殊的原因导致这些子网络之间出现网络不连通的状况，但各个子网络的内部网络是正常的，从而导致整个系统的网络环境被切分成了若干个孤立的区域。



###  放弃CAP定理

####  放弃C

指的是放弃强一致性，保留数据的最终一致性，这样的系统无法保证数据保持实时的一致性，但是能够承诺的是，数据最终会达到一个一致的状态。具体多久能够达到数据一致取决于系统的设计，主要包括数据副本在不同节点之间的复制时间长短。

####  放弃A

一旦系统遇到网络分区或其它故障时，那么收到影响的服务需要等待一定的时间，因此在等待期间系统无法对外提供正常的服务，即不可用。

####  放弃P

可以将所有数据都放在一个分布式节点上，这样不会出现由于网络分区带来的负面影响，但同时需要注意的是，放弃P就意味着放弃了系统的可扩展性。

##  BASE理论

BASE是对CAP中一致性和可用性权衡的结果，其来源于对大规模互联网系统分布式实践的总结，是基于CAP定理逐步演化而来，核心思想是即使无法做到强一致性，但每个应用都可以根据自身的业务特点，采用适当的方式来达到最终一致性。

###  Basically Available(基本可用)

基本可用是指分布式系统在出现不可预知故障的时候，允许损失部分可用性。比如说搜索引擎正常需要在0.5秒内返回结果，但由于出现故障，响应时间达到了1～2秒。

###  Soft state(软状态)

指允许系统中的数据存在中间状态，并认为该中间状态的存在不会影响系统的整体可用性，即允许系统在不同节点的数据副本之间进行数据同步的时候出现延时。

###  Eventually consistent(最终一致性)

强调的是系统中所有的数据副本，在经过一段时间的同步后，最终能够达到一个一致的状态，而需要实时保证系统数据的强一致性。